<mark style="background: #FFF3A3A6;">ToDo:</mark>
- [x] <mark style="background: #BBFABBA6;">Вибір бібліотек для ведення обліку користувачів системи ✅ 2024-03-05</mark>
- [x] <mark style="background: #BBFABBA6;">Підняття бази даних в Docker ✅ 2024-03-05</mark>
- [x] <mark style="background: #BBFABBA6;">Створення базового класу користувача ✅ 2024-03-05</mark>
- [ ] Створення DbContext-у
- [ ] Створити API проект дял взаємодії із користувачами в БД(наразі потрібен для створення та прокидання міграцій)
- [ ] Створення та прокидання міграцій в базу даних
- [ ] Написання методу перевірки наявності користувача у системі

## Технології
Спочатку було вирішено використати бібліотеку ASP.NET Identity, яка є дуже зручним та потужним інструментарієм для ведення обліку користувачів системи, автентифікації/авторизації користувача в системі, веденні обліку прав користувача:

> Система <mark style="background: #ADCCFFA6;">ASP.NET Identity</mark> розроблена для заміни попередніх систем ASP.NET Membership та Simple Membership. Віна включає підтримку профілю, інтеграцію OAuth, працює з OWIN і входить до складу шаблонів ASP.NET, які постачаються з Visual Studio 2013.

Але при детальному досліджені було виявлено, що дана бібліотека розроблена для веб користування, і в моєму проекті її потенціал буде використано тільки на 10-20%. Тому було вирішено дослідити ті компоненти цієї бібліотеки, які будуть корисні у проекті та на основі досліджень реалізувати власний функціонал.
## Підняття бази даних у Docker
Docker compose файл, який використовувався для підняття бази даних Microsoft SQL Server:

```docker-compose.yml
version: '3.9'
services:
    sql-server-db:
        image: mcr.microsoft.com/mssql/server
        container_name: sql-server-db
        environment:
            - MSSQL_SA_PASSWORD=Strong2@PWD12
            - ACCEPT_EULA=Y
        ports:
            - "5434:1433"
        volumes:
            - sqlvolume:/var/opt/mssql

volumes:
    sqlvolume:
```

![[Pasted image 20240305133836.png]]
![[Pasted image 20240305133914.png]]
Як можна побачити на фото база даних розгорнута у docker-контейнері. Також в мене успішно вийшло під'єднатися до неї за допомогою SSMS.
<mark style="background: #ADCCFFA6;">SSMS</mark> - це програма, розроблена корпорацією Microsoft, яка використовується для налаштування, керування та адміністрування всіх компонентів Microsoft SQL Server.
## Створення базового класу користувача
Базовий клас користувача має наступний вигляд:

```CSharp
public class User
{
    public string Id { get; set; } = Guid.NewGuid().ToString();
    public long TelegramId { get; set; }
    public string? UserName { get; set; }
    public string? PasswordHash { get; set; }
    public string? Email { get; set; }
    public string? NormalizedUserName => UserName?.ToUpper();
    public string? NormalizedEmail => Email?.ToUpper();
}
```

## Створення DbContext-у